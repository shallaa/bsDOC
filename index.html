<!DOCTYPE html>
<html lang="ko">
<head>
<title>bsDOC - projectBS Document System</title>
<meta name="keywords" content="bs5" />
<meta name="description" content="bs5 Test suite" />
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,target-densitydpi=medium-dpi" />
<link rel="shortcut icon" href="http://blog.bsidesoft.com/favicon.ico" type="image/x-icon">
</head>
<body>

<style type="text/css">
#preloader{font-size:1em;text-align:center;margin:auto}
#stage{display:none}
</style>

<div id="preloader">Loading...</div>
<div id="stage">
	<h1>projectBS Document System</h1>
	<div id="left"><div id="contents">Load</div></div>
	<div id="right"><div id="doc">Select Contents</div></div>
</div>

<script src="../bsJS/bsjs.0.5.js"></script><script>
bs.plugin('markdown'),
bs(function(){
	
	SUB_PROJECTS:
	var PROJECT = 'bsJS,bsPHP';
	
	STARTER:
	var start = function(){
		
		CSS:
		bs.Css('h1').S( 'text-align', 'center', 'font-size', '1.5em' ),
		bs.Css('#stage').S( 'margin', '0 auto', 'width', '100%', 'max-width', '960px' ),
		bs.Css('#left').S( 'width', '20%', 'float', 'left', 'font-size', '1em', 'overflow', 'hidden', 'background', '#eee' ),
		bs.Css('#contents').S( 'margin', '0.5em' ),
		bs.Css('#right').S( 'width', '80%', 'float', 'left', 'font-size', '1.2em', 'overflow', 'hidden' ),
		bs.Css('#doc').S( 'margin', '0.5em' );
		
		OPEN:
		bs.Dom('#preloader').S( 'display', 'none' ),
		bs.Dom('#stage').S( 'display', 'block' );
		
		ROUTING:
		bs.router( 'path', 'controller/path.json', 'start', function(){} );
		
	},
	loader = function(v){
		bs.get( function(data){
			var str, t0, key, items = {}, menu = [];
			if( !k ) bs.Dom('#contents').S( 'html', '' );
			index[v] = t0 = JSON.parse(data);
			str = '<div>' + v + ' <select id="' + v + '_ver"><option value="">version</option>';
			for( key in t0 ) str += '<option value="' + key + '">' + key + '</option>', items[key] = t0[key];
			bs.Dom(str + '</select>').S( '<', '#contents', 'change', function(e){
				var str, ver = bs.Dom('#' + v + '_ver').S('@value'), t0 = items[ver], t1 = [], t2, t3, i, j;
				if( !t0 ) return bs.Dom('#' + v + '_list').S('html','');
				for( i in t0 ) t1[t1.length] = i;
				for( str = '', t1.sort(), i = 0, j = t1.length ; i < j ; i++ ){
					str += '<div>' + t1[i] + '</div><ul>';
					for( t2 = t0[t1[i]], k = 0, l = t2.length ; k < l ; k++ ) t3 = t2[k], str += '<li data-path="' + [v, ver, t1[i].split('.')[1], t3].join('/') + '">' + t3 + '</li>';
					str += '</ul>'
				}
				bs.Dom('#' + v + '_list').S( 'html', str );
				bs.Dom('[data-path^=' + v + ']').S( 'cursor', 'pointer', 'down', function(e){
					bs.get( function(data){
						bs.Dom('#doc').S( 'html', bs.markdown(data) );
					}, bs.Dom(this).S('*path')+'.html' );
				} );
			} );
			bs.Dom('<ul id="' + v + '_list"></ul>').S( '<', '#contents' );
			if( ++k == j ) start();
		}, v + '/index.json' );
	}, index = {}, t0, i, j, k;  
	
	LOADING:
	t0 = PROJECT.split(','), i = 0, j = t0.length, k = 0;
	while( i < j ) loader(t0[i++]);
});
</script>
</body>
</html>